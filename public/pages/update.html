<!-- Update Tab -->
<div class="tab-pane fade" id="update" role="tabpanel">
    <div class="container-fluid">
        <!-- Update Mode Selection -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Modo de Actualización</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="updateMode" id="bulkLocationMode" value="bulkLocation" checked>
                                    <label class="form-check-label" for="bulkLocationMode">
                                        <strong>Por Locación Completa</strong><br>
                                        <small class="text-muted">Actualizar todos los puntos de una locación</small>
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="updateMode" id="multiSelectMode" value="multiSelect">
                                    <label class="form-check-label" for="multiSelectMode">
                                        <strong>Selección Múltiple</strong><br>
                                        <small class="text-muted">Seleccionar puntos específicos</small>
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="updateMode" id="replanteoMode" value="replanteo">
                                    <label class="form-check-label" for="replanteoMode">
                                        <strong>Crear Replanteo</strong><br>
                                        <small class="text-muted">Generar punto de replanteo</small>
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="updateMode" id="newPointMode" value="newPoint">
                                    <label class="form-check-label" for="newPointMode">
                                        <strong>Nuevo Punto</strong><br>
                                        <small class="text-muted">Crear punto completamente nuevo</small>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bulk Location Update -->
        <div class="row" id="bulkLocationPanel">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h6 class="card-title mb-0">Actualización por Locación Completa</h6>
                    </div>
                    <div class="card-body">
                        <form id="bulkLocationForm">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="bulkLocation" class="form-label">Locación</label>
                                    <select class="form-select" id="bulkLocation" required>
                                        <option value="">Seleccione una locación...</option>
                                    </select>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label for="bulkStatus" class="form-label">Nuevo Estado</label>
                                    <select class="form-select" id="bulkStatus" required>
                                        <option value="">Seleccione un estado...</option>
                                        <option value="completado">Completado</option>
                                        <option value="pendiente">Pendiente</option>
                                        <option value="descartado">Descartado</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="bulkType" class="form-label">Tipo de Actualización</label>
                                    <select class="form-select" id="bulkType" required>
                                        <option value="">Seleccione el tipo...</option>
                                        <option value="marcado">Estado de Marcado</option>
                                        <option value="monitoreo">Estado de Monitoreo</option>
                                        <option value="ambos">Ambos Estados</option>
                                    </select>
                                </div>
                                
                                <div class="col-md-6 mb-3" id="bulkReasonField" style="display: none;">
                                    <label for="bulkReason" class="form-label">Razón de Descarte</label>
                                    <input type="text" class="form-control" id="bulkReason" placeholder="Especifique la razón del descarte">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-12">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-2"></i>Actualizar Locación
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h6 class="card-title mb-0">Vista Previa</h6>
                    </div>
                    <div class="card-body">
                        <div id="bulkPreview" class="small">
                            <div class="text-muted">Seleccione una locación para ver la vista previa de los cambios.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Multi-Select Update -->
        <div class="row" id="multiSelectPanel" style="display: none;">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h6 class="card-title mb-0">Selección Múltiple de Puntos</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <label for="multiLocation" class="form-label">Filtrar por Locación</label>
                                <select class="form-select" id="multiLocation">
                                    <option value="">Todas las locaciones</option>
                                </select>
                            </div>
                            
                            <div class="col-md-3 mb-3">
                                <label for="multiStatus" class="form-label">Nuevo Estado</label>
                                <select class="form-select" id="multiStatus">
                                    <option value="">Seleccione un estado...</option>
                                    <option value="completado">Completado</option>
                                    <option value="pendiente">Pendiente</option>
                                    <option value="descartado">Descartado</option>
                                </select>
                            </div>
                            
                            <div class="col-md-3 mb-3">
                                <label for="multiType" class="form-label">Tipo de Actualización</label>
                                <select class="form-select" id="multiType">
                                    <option value="">Seleccione el tipo...</option>
                                    <option value="marcado">Estado de Marcado</option>
                                    <option value="monitoreo">Estado de Monitoreo</option>
                                    <option value="ambos">Ambos Estados</option>
                                </select>
                            </div>
                            
                            <div class="col-md-3 mb-3" id="multiReasonField" style="display: none;">
                                <label for="multiReason" class="form-label">Razón de Descarte</label>
                                <input type="text" class="form-control" id="multiReason" placeholder="Especifique la razón">
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-12">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="selectAllPoints">
                                    <label class="form-check-label" for="selectAllPoints">
                                        Seleccionar todos los puntos visibles
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-12">
                                <button class="btn btn-success" id="applyMultiUpdate" disabled>
                                    <i class="fas fa-save me-2"></i>Aplicar Cambios a Puntos Seleccionados
                                </button>
                            </div>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="table table-sm table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th width="50">
                                            <input type="checkbox" id="selectAllPointsHeader">
                                        </th>
                                        <th>Locación</th>
                                        <th>Código Punto</th>
                                        <th>Estado Marcado</th>
                                        <th>Estado Monitoreo</th>
                                    </tr>
                                </thead>
                                <tbody id="multiSelectTableBody">
                                    <tr>
                                        <td colspan="5" class="text-center text-muted">
                                            <i class="fas fa-info-circle me-2"></i>Seleccione una locación para filtrar los puntos
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="mt-3">
                            <div class="alert alert-info" id="selectedPointsInfo" style="display: none;">
                                <i class="fas fa-info-circle me-2"></i><span id="selectedPointsCount">0 puntos seleccionados</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Replanteo Mode -->
        <div class="row" id="replanteoPanel" style="display: none;">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h6 class="card-title mb-0">Crear Punto de Replanteo</h6>
                    </div>
                    <div class="card-body">
                        <form id="replanteoForm">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="replanteoLocation" class="form-label">Locación</label>
                                    <select class="form-select" id="replanteoLocation" required>
                                        <option value="">Seleccione una locación...</option>
                                    </select>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label for="replanteoPoint" class="form-label">Punto Original</label>
                                    <select class="form-select" id="replanteoPoint" required>
                                        <option value="">Seleccione un punto...</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="replanteoEste" class="form-label">Nueva Coordenada Este</label>
                                    <input type="number" class="form-control" id="replanteoEste" step="0.001" required>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label for="replanteoNorte" class="form-label">Nueva Coordenada Norte</label>
                                    <input type="number" class="form-control" id="replanteoNorte" step="0.001" required>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-12">
                                    <button type="submit" class="btn btn-warning">
                                        <i class="fas fa-plus me-2"></i>Crear Replanteo
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h6 class="card-title mb-0">Vista Previa del Replanteo</h6>
                    </div>
                    <div class="card-body">
                        <div id="replanteoPreview" class="small">
                            <div class="text-muted">Seleccione un punto para ver la vista previa del replanteo.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- New Point Mode -->
        <div class="row" id="newPointPanel" style="display: none;">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h6 class="card-title mb-0">Crear Nuevo Punto</h6>
                    </div>
                    <div class="card-body">
                        <form id="newPointForm">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="newPointLocation" class="form-label">Locación</label>
                                    <select class="form-select" id="newPointLocation" required>
                                        <option value="">Seleccione una locación...</option>
                                    </select>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label for="newPointReference" class="form-label">Punto de Referencia (Opcional)</label>
                                    <select class="form-select" id="newPointReference">
                                        <option value="">Sin punto de referencia...</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="newPointEste" class="form-label">Coordenada Este</label>
                                    <input type="number" class="form-control" id="newPointEste" step="0.001" required>
                                </div>
                                
                                <div class="col-md-4 mb-3">
                                    <label for="newPointNorte" class="form-label">Coordenada Norte</label>
                                    <input type="number" class="form-control" id="newPointNorte" step="0.001" required>
                                </div>
                                
                                <div class="col-md-4 mb-3">
                                    <label for="newPointProf" class="form-label">Profundidad</label>
                                    <input type="number" class="form-control" id="newPointProf" step="0.01" required>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="newPointSuperpos" class="form-label">Superposición (%)</label>
                                    <input type="number" class="form-control" id="newPointSuperpos" step="0.01" min="0" max="100">
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label for="newPointDistance" class="form-label">Distancia/Descripción</label>
                                    <input type="text" class="form-control" id="newPointDistance" placeholder="Descripción opcional">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-12">
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-plus me-2"></i>Crear Nuevo Punto
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h6 class="card-title mb-0">Vista Previa del Nuevo Punto</h6>
                    </div>
                    <div class="card-body">
                        <div id="newPointPreview" class="small">
                            <div class="text-muted">Complete los datos para ver la vista previa del nuevo punto.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
